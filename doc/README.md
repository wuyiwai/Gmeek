# Gmeek 项目文档

## 项目结构说明

本项目是一个静态博客生成器，主要由以下组件构成：

### 核心文件

1. `Gmeek.py`
   - 项目的主要执行文件
   - 负责博客内容的生成和处理
   - 包含主要的业务逻辑代码
   - 支持多模板切换和模板回退机制

### 配置目录 (`config/`)

1. `config.yaml`
   - 博客配置文件
   - 指定使用的模板名称
   ```yaml
   # 博客基础配置
   template: "minimal"  # 使用的模板名称
   ```

### 模板目录 (`templates/`)

模板目录采用分层结构，每个主题都有自己独立的目录：

```
templates/
├── default/          # 默认模板
│   ├── base.html    # 基础模板
│   ├── footer.html  # 页脚模板
│   ├── plist.html   # 文章列表页
│   ├── post.html    # 文章详情页
│   └── tag.html     # 标签页
└── minimal/          # 极简主题
    ├── base.html    # 基础模板
    ├── footer.html  # 页脚模板
    ├── plist.html   # 文章列表页
    ├── post.html    # 文章详情页
    └── tag.html     # 标签页
```

## 模板系统说明

### 模板继承机制

所有模板都基于 `base.html` 构建，使用 Jinja2 的模板继承机制：

```html
{% extends "minimal/base.html" %}

{% block title %}页面标题{% endblock %}

{% block style %}
<style>
    /* 页面特定样式 */
</style>
{% endblock %}

{% block content %}
<!-- 页面内容 -->
{% endblock %}
```

### 模板回退机制

- 如果当前主题中缺少某个模板文件，系统会自动使用 default 主题中的对应文件
- 确保了即使自定义主题不完整也能正常工作
- 开发新主题时只需要覆盖需要自定义的文件

### 主题功能

1. 响应式设计
   - 适配桌面和移动设备
   - 流畅的布局切换

2. 暗色模式支持
   - 自动跟随系统主题
   - 支持手动切换
   - 主题状态持久化

3. 样式特性
   - CSS 变量实现主题切换
   - 平滑过渡动画
   - 统一的颜色方案

## 使用说明

1. 配置要求
   - Python 环境
   - 相关依赖包（具体依赖请参考项目根目录的requirements.txt）

2. 基本使用
   - 在 config.yaml 中指定要使用的模板
   - 运行 `Gmeek.py` 生成静态博客页面

3. 自定义主题
   - 在 templates 目录下创建新的主题目录
   - 复制需要自定义的模板文件
   - 修改模板文件实现自定义样式
   - 在 config.yaml 中切换到新主题

## 注意事项

1. 创建新主题时不需要实现所有模板文件，未实现的部分会自动使用默认主题
2. 修改模板后需要重新运行生成器以更新页面
3. 建议保持与默认主题相同的模板变量名，以确保兼容性
4. 暗色模式的颜色方案建议保持足够的对比度
5. 建议在多个设备上测试响应式布局

## 开发建议

1. 新主题开发
   - 从复制 default 主题开始
   - 逐步修改样式和布局
   - 保持模板结构的一致性

2. 样式定制
   - 使用 CSS 变量便于主题切换
   - 保持响应式设计
   - 注意暗色模式的可用性

3. 模板继承
   - 合理使用 block 划分
   - 保持命名的一致性
   - 避免重复代码